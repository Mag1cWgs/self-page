# 关系数据理论
1. 问题的提出
2. 规范化

## 1-问题的提出
1. 概念回顾
2. 关系模式的形式化定义
3. 数据依赖
4. 关系模式的简化定义
5. 数据依赖对关系模式影响

### 1-1-概念回顾
- 关系
- 关系模式
- 关系数据库
- 关系数据库的模式

### 1-2-形式化定义
- 关系模式由五部分组成，即它是一个五元组：

    $$ R(U, D, DOM, F) $$

    - `R`：	关系名
    - `U`：	组成该关系的属性名集合
    - `D`：	属性组U中属性所来自的域
    - `DOM`：	属性向域的映象集合
    - `F`：	属性间数据的依赖关系集合

### 1-3-数据依赖
- 数据依赖是指一个关系内部属性与属性之间的约束关系。
    - 是对现实世界属性间相互联系的抽象，
    - 是数据内在的性质，
    - 是语义的体现。
- 数据依赖是数据完整性的一部分，因此是数据库模式设计的关键。
- 数据依赖主要有函数依赖和多值依赖两种类型。

### 1-4-关系模式的简化定义
- 关系模式R(U, D, DOM, F)可以简化为一个三元组：

    $$ R<U, F> $$

    - 注意，为了与使用五元组表示的关系模式相区别，使用三元组表示的关系模式采用一对尖括号（`<>`）取代了圆括号。
- 当且仅当 $U$ 上的一个关系 $r$ 满足 $F$ 时，$r$ 称为关系模式 $R<U, F>$ 的一个关系。

### 1-5-数据依赖对关系模式影响
- 关系作为一张二维表，有其最基本的要求：每个分量是不可再分的数据项。
- 分量的原子性是构成关系的第一要素。

- 理想的关系模式应具备的特点：
    - 不会发生插入异常、删除异常、更新异常。
    - 数据冗余应尽可能少。
- 将非理想的关系模式转换为理想的关系模式：
    - 通过分解关系模式来消除其中不合适的数据依赖。

## 2-规范化
规范化理论正是用来改造关系模式，通过分解关系模式来消除其中不合适的数据依赖，以解决插入异常、删除异常、更新异常和数据冗余问题。
1. 函数依赖
1. 码
1. 范式
1. 2NF
1. 3NF
1. BCNF
1. 小结

### 2-1-函数依赖
1. 函数依赖
1. 平凡函数依赖与非平凡函数依赖
1. 完全函数依赖与部分函数依赖
1. 传递函数依赖

### 2-2-码
1. 超码
1. 候选码
1. 主码
1. 主属性与非主属性
1. 码

### 2-3-范式
范式是符合某一种级别的关系模式的集合。关系数据库中的关系必须满足一定的要求。满足不同程度要求的为不同范式。

1. 第一范式(1NF)
    - 如果一个关系模式 $R$ 的所有属性都是不可分的基本数据项，则 $R \in 1NF$
    - 通俗而言：每一个属性(字段)都不可再分
1. 第二范式(2NF)
    - 如果 $R \in 1NF$，且每一个非主属性完全函数均依赖于码，则 $R \in 2NF$
    - 通俗而言：每一个非主属性(非主码字段)都完全依赖于主属性(主码)
        - 如果就一个主属性，则默认满足 $2NF$
        - 如果有多个主属性，则不能出现只满足一个主属性（主码）的非主属性
1. 第三范式(3NF)
    - 通俗而言：不能存在间接依赖；如果出现了间接依赖，最好拆出新的表(关系模式)。
1. BC范式(BCNF)
    - 通俗而言：所有非主属性必须对主码完全依赖；也就是说，不能依赖于非主属性
1. 第四范式(4NF)
1. 第五范式(5NF)
